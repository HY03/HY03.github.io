<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>정보보안 - iptables | Bluesplatter</title>
<meta name="description" content="iptables    정의            리눅스 상에서 방화벽을 설정하는 도구       패킷 필터링 기능 : 지나가는 패킷의 헤더를 보고 해당 패킷에 대한 허용/차단 (ACCEPT/DROP) 결정       Rule 기반의 패킷 필터링 기능을 제공           기능            상태추적 (Connection Tracking or Stateful Inspection)                    방화벽을 통과하는 모든 패킷에 대한 연결상태를 추적, 메모리에 기록하여 상태추적테이블을 생성           모든 송 수신 패킷을 기록하고 검사           기존 연결을 가장하여 접근할 경우 저장되어 있는 상태목록과 비교하여 허용/차단           이미 연결된 상태의 패킷은 검사하지 않음           Stateful Inspection : 이스라엘 보안업체인 Checkpoint 사 에서 최초로 개발한 방화벽 구조                       NAT 기능                    네트워크 주소 변환                       패킷 레벨에서 로깅       확장 모듈을 이용해 다양한 기능 제공           용어            Table                    Filter Table           NAT Table           Mangle Table                       Chain : 패킷이 이동하는 경로 (3가지 기본 Chain 이 존재-삭제불가)                    Chain Input : 방화벽을 최종 목적지로 하는 체인           Chain Output : 방화벽을 최초 출발지로 정하는 체인           Chain Forward : 방화벽을 통과하는 체인 (방화벽을 별도의 서버로 구성해서 서비스할 때 사용하는 체인)           -&gt; INPUT -&gt; Linux Server -&gt; Output -&gt;           -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt; FORWARD -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;                            Linux Server 를 목적지로 삼는 모든 패킷은 Input Chain 통과               Linux Server 에서 생성되어 외부로 보내지는 모든 패킷은 Output Chain 을 통과               Forward Chain 은 현재의 Linux Server 가 목적지가 아닌 패킷이 통과하는 Chain (방화벽을 별도의 서버로 구성)                                               Rule : 패킷 필터링을 하기 위한 Rule                    기본구문 형식                            iptables [테이블] [체인] [룰] [타깃]               대 소문자 구분                                   테이블 설정                            형식 : -t [테이블]               테이블을 명시하지 않으면 기본값으로 Filter Table 이 적용                                   체인(Chain) 설정                            형식 : iptables -[A|I|D] [체인]               -A : append 모드 (해당 체인의 가장 마지막 줄에 룰을 추가)               -I : insert 모드 (해당 체인의 첫 줄에 룰을 추가)                                    행번호 지정시 : -I 체인 n(행번호) (n 행에 롤 추가)                                               -D (delete) : delete 모드                                    -D 체인 룰 : 해당 룰 삭제                   -D 체인 n(행번호) : n행의 룰 삭제                                            iptables -D INPUT 1                                                                                       -P : 해당 체인의 기본 정책을 설정, 변경                                    기본 정책 : 해당 체인의 모든 룰에 매치가 되지 않으면 적용되는 정책                   iptables -P [체인명] [ACCPET|DROP|REJECT|LOG]                                               -R (replace) : 위치 선택 후 정책 교환               -N (new chain) : 새로운 체인을 생성               -Z : 체인의 모든 규칙들의 패킷과 바이트 카운트를 0으로 만듬               -X (delete chain) : 비어있는 체인 제거               -C (check) : 패킷을 테스트                                   룰 설정                            형식 : iptables -A INPUT -s [발신지] --sport [발신지포트] -d [목적지] --dport [목적지포트] -j [정책]               제어 옵션 명령어                                    -s (source) : 패킷의 송신지를 제어, IP 또는 IP 대역을 명시 가능                                            -s 192.168.159.0/24                                                           -d (destination) : 패킷의 수신지를 제어, IP 또는 IP 대역을 명시 가능                   -j (jump) : 방화벽을 지난 후 패킷의 상태를 제어                                            -j [정책] : 룰에 매치될 때 적용할 정책을 지정                       ACCEPT : 허용                       DROP : 해당 패킷을 차단한 후 아무런 응답 메시지를 전송하지 않음                       REJECT : 해당 패킷을 차단한 후 ICMP 에러 메시지로 응답 (불필요한 네트워크 트래픽 발생)                       LOG : 탐지 로그를 남김. 주로 /var/log/message 에 남김                                                           -p (protocol) : 프로토콜을 제어                   -i (inbound interface) : 패킷이 들어오는 네트워크 인터페이스                   -o (outbound interface) : 패킷이 나가는 네트워크 인터페이스                   -f (fragment) : 분절(단편화)된 패킷                   --sport : 송신지 포트 제어 (대역 명시 가능)                                            --sport 1024: : 1024 이상의 포트                       --sport :65535 : 65535 이하의 포트                       --sport 1:1023 : 1 ~ 1023 대역의 포트                                                           --dport : 수신지 포트 제어                   --icmp-type [메시지타입] : ICMP 의 경우 타입과 코드를 이용한 메시지 식별                                            --icmp-type echo-request (ICMP Echo Request 를 의미)                                                                                       예시                                    기본 정책을 ACCPET 로 설정                                            iptables -P INPUT ACCEPT                       iptables -P OUTPUT ACCEPT                       iptables -P FORWARD ACCEPT                       -P (policy) : 미리 만들어진 체인의 정책을 바꾸기                                                           현재 자신의 방화벽 규칙을 보는 명령                                            iptables --list                       iptables -L (list) : 적용되어 있는 정책 목록을 출력                                                           규칙 추가 후에 저장하기                                            service iptables save -&gt; /etc/sysconfig/iptables                                                           현재 iptables 규칙을 초기화 하기                                            iptables -F (flush) : 체인의 모든 규칙을 삭제                       iptables -F INPUT                                                           특정 출발지의 패킷을 모두 차단                                            iptables -A INPUT -s 192.168.0.5 -j DROP                                                           특정 목적지로 가는 패킷이 아니라면 허용                                            iptables -A INPUT -d !192.168.0.10 -j ACCPET                                                           특정 프로토콜, 특정 포트일 경우 허용                                            iptables -A INPUT -p TCP --dport 80 -j ACCEPT                                                           ICMP 의 경우 타입과 코드를 이용한 메시지 식별                                                                                   상태 추적 (Connection Tracking)            상태 유형                    New                            상태추적 테이블에 연결 정보를 가지고 있지 않은 패킷               최초로 들어온 패킷의 상태               예) TCP 의 SYN 패킷                                   ESTABLISHED                            상태추적 테이블에 연결 정보를 가지고 있는 패킷의 상태               연결된 이후에 송수신되는 패킷들의 상태                                   RELATED                            상태추적 테이블에 연관된 연결정보를 가지고 있는 패킷의 상태                                    연관 : 연결 시에 포트의 정보가 서비스 수행중에 새롭게 추가될 수 있는데 이러한 서비스 패킷의 상태를 말함                                            예) FTP 프로토콜 (21/TCP 제어채널 -&gt; 20/TCP 데이터채널)                                                                                                           INVALID                            어떤 상태에도 해당되지 않는 패킷상태               연결된 상태를 알 수 없거나 잘못된 헤더를 가지고 있는 경우                                               프로토콜 상태 유형                    TCP 프로토콜 상태                            방화벽 기준                                    inbound SYN 패킷 : NEW                   outbound SYN + ACK 패킷 : ESTABLISHED                   연결종료 마지막 ACK 패킷이 보이기 전까지 ESTABLISHED 상태                                                                   UDP 프로토콜 상태                            비연결 (Connectionless) 프로토콜 : 연결 상태를 유지하지 않음                                    프로토콜 수준에서 연결상태 정보가 없음                                               최초 inbound : NEW 상태               상태추적 테이블에 UDP 는 inbound 될 때마다 임의의 시간동안 정보를 유지 (ESTABLISHED 상태)                                               룰 설정 예시                    위조된 TCP SYN 패킷을 차단                            상태 추적 테이블 상 NEW 이면서 SYN 플래그로 설정되지 않은 패킷 -&gt; DROP               iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT                                    상태추적 테이블에서 ESTABLISEHD, RELATED 상태의 패킷은 모두 허용                                            이미 허용된 트래픽에 대해서는 룰 검사를 다시 하지 않음 (성능 향상)                                                           -m state : 상태추적기능을 사용하기 위한 옵션 (state 모듈)                   --state : state 옵션                                               iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix &quot;[Forged SYN Packet]&quot;                                    패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 로그에 남김                   --log-prefix &quot;접두어&quot; : 로그에 접두어를 만들어 표시                                               iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP                                    패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 차단                                               설정 예시                       iptables -F INPUT       iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT       iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix &quot;[Forged SYN Packet]&quot;       iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP                                                                   FTP ACTIVE MODE 상태추적 (Passive 모드일 경우 포트 지정을 1024 이상으로 하면 됌)                   iptables -F INPUT        iptables -P INPUT DROP        iptables -P OUTPUT DROP       iptables -A INPUT -m state --state ESTABLISHED -j LOG --log-prefix &quot;[INPUT ESTABLISHED]&quot;       iptables -A INPUT -m state --state RELATED -j LOG --log-prefix &quot;[INPUT RELATED]&quot;       iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT       iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j LOG --log-prefix &quot;[FTP INPUT_NEW]&quot;       iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j ACCEPT       iptables -A OUTPUT -m state --state ESTABLISHED -j LOG --log-prefix &quot;[OUTPUT ESTABLISHED]&quot;       iptables -A OUTPUT -m state --state RELATED -j LOG --log-prefix &quot;[OUTPUT RELATED]&quot;       iptables -A OUTPUT -m state --state ESTABLISHED, RELATED -j ACCEPT                                                   확장 모듈            connlimit 모듈                    개요                            동일한 ip 대역에 대한 동시 연결 개수 제한 모듈               디도스 공격에 효과적 대응                                   주요옵션                            --connlimit-above n : n을 초과하는 동시 연결을 제한               --connlimit-mask mask : 0~32 범위의 mask 값을 지정, IP 대역에 대한 동시 연결 제한                                   예시                            웹서버 80 포트에 대한 TCP SYN Flooding 공격 대응룰                                    TCP 80포트에 동일 src IP 로 동시연결개수가 5개 초과시 이를 차단                   로그 저장 위치 : /var/log/messages                       iptables -F INPUT   iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT   iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j LOG --log-prefix &quot;[CONNLIMIT]&quot;   iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j DROP                                                                                       웹서버 (80/tcp) 에 대한 TCP SYN Flooding 공격에 대응하기 위한 룰 설정                       iptables -F INPUT       iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT       iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 10 --connlimit-mask 24 -j LOG --log-prefix &quot;[CONNLIMIT]&quot;       iptables -A                                                                                              limit 모듈                    룰에 매치되는 비율을 제한">


  <meta name="author" content="HY03">
  
  <meta property="article:author" content="HY03">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="Bluesplatter">
<meta property="og:title" content="정보보안 - iptables">
<meta property="og:url" content="https://bluesplatter.com/is_certification/IS-IncidentAnalysis-iptables/">


  <meta property="og:description" content="iptables    정의            리눅스 상에서 방화벽을 설정하는 도구       패킷 필터링 기능 : 지나가는 패킷의 헤더를 보고 해당 패킷에 대한 허용/차단 (ACCEPT/DROP) 결정       Rule 기반의 패킷 필터링 기능을 제공           기능            상태추적 (Connection Tracking or Stateful Inspection)                    방화벽을 통과하는 모든 패킷에 대한 연결상태를 추적, 메모리에 기록하여 상태추적테이블을 생성           모든 송 수신 패킷을 기록하고 검사           기존 연결을 가장하여 접근할 경우 저장되어 있는 상태목록과 비교하여 허용/차단           이미 연결된 상태의 패킷은 검사하지 않음           Stateful Inspection : 이스라엘 보안업체인 Checkpoint 사 에서 최초로 개발한 방화벽 구조                       NAT 기능                    네트워크 주소 변환                       패킷 레벨에서 로깅       확장 모듈을 이용해 다양한 기능 제공           용어            Table                    Filter Table           NAT Table           Mangle Table                       Chain : 패킷이 이동하는 경로 (3가지 기본 Chain 이 존재-삭제불가)                    Chain Input : 방화벽을 최종 목적지로 하는 체인           Chain Output : 방화벽을 최초 출발지로 정하는 체인           Chain Forward : 방화벽을 통과하는 체인 (방화벽을 별도의 서버로 구성해서 서비스할 때 사용하는 체인)           -&gt; INPUT -&gt; Linux Server -&gt; Output -&gt;           -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt; FORWARD -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;                            Linux Server 를 목적지로 삼는 모든 패킷은 Input Chain 통과               Linux Server 에서 생성되어 외부로 보내지는 모든 패킷은 Output Chain 을 통과               Forward Chain 은 현재의 Linux Server 가 목적지가 아닌 패킷이 통과하는 Chain (방화벽을 별도의 서버로 구성)                                               Rule : 패킷 필터링을 하기 위한 Rule                    기본구문 형식                            iptables [테이블] [체인] [룰] [타깃]               대 소문자 구분                                   테이블 설정                            형식 : -t [테이블]               테이블을 명시하지 않으면 기본값으로 Filter Table 이 적용                                   체인(Chain) 설정                            형식 : iptables -[A|I|D] [체인]               -A : append 모드 (해당 체인의 가장 마지막 줄에 룰을 추가)               -I : insert 모드 (해당 체인의 첫 줄에 룰을 추가)                                    행번호 지정시 : -I 체인 n(행번호) (n 행에 롤 추가)                                               -D (delete) : delete 모드                                    -D 체인 룰 : 해당 룰 삭제                   -D 체인 n(행번호) : n행의 룰 삭제                                            iptables -D INPUT 1                                                                                       -P : 해당 체인의 기본 정책을 설정, 변경                                    기본 정책 : 해당 체인의 모든 룰에 매치가 되지 않으면 적용되는 정책                   iptables -P [체인명] [ACCPET|DROP|REJECT|LOG]                                               -R (replace) : 위치 선택 후 정책 교환               -N (new chain) : 새로운 체인을 생성               -Z : 체인의 모든 규칙들의 패킷과 바이트 카운트를 0으로 만듬               -X (delete chain) : 비어있는 체인 제거               -C (check) : 패킷을 테스트                                   룰 설정                            형식 : iptables -A INPUT -s [발신지] --sport [발신지포트] -d [목적지] --dport [목적지포트] -j [정책]               제어 옵션 명령어                                    -s (source) : 패킷의 송신지를 제어, IP 또는 IP 대역을 명시 가능                                            -s 192.168.159.0/24                                                           -d (destination) : 패킷의 수신지를 제어, IP 또는 IP 대역을 명시 가능                   -j (jump) : 방화벽을 지난 후 패킷의 상태를 제어                                            -j [정책] : 룰에 매치될 때 적용할 정책을 지정                       ACCEPT : 허용                       DROP : 해당 패킷을 차단한 후 아무런 응답 메시지를 전송하지 않음                       REJECT : 해당 패킷을 차단한 후 ICMP 에러 메시지로 응답 (불필요한 네트워크 트래픽 발생)                       LOG : 탐지 로그를 남김. 주로 /var/log/message 에 남김                                                           -p (protocol) : 프로토콜을 제어                   -i (inbound interface) : 패킷이 들어오는 네트워크 인터페이스                   -o (outbound interface) : 패킷이 나가는 네트워크 인터페이스                   -f (fragment) : 분절(단편화)된 패킷                   --sport : 송신지 포트 제어 (대역 명시 가능)                                            --sport 1024: : 1024 이상의 포트                       --sport :65535 : 65535 이하의 포트                       --sport 1:1023 : 1 ~ 1023 대역의 포트                                                           --dport : 수신지 포트 제어                   --icmp-type [메시지타입] : ICMP 의 경우 타입과 코드를 이용한 메시지 식별                                            --icmp-type echo-request (ICMP Echo Request 를 의미)                                                                                       예시                                    기본 정책을 ACCPET 로 설정                                            iptables -P INPUT ACCEPT                       iptables -P OUTPUT ACCEPT                       iptables -P FORWARD ACCEPT                       -P (policy) : 미리 만들어진 체인의 정책을 바꾸기                                                           현재 자신의 방화벽 규칙을 보는 명령                                            iptables --list                       iptables -L (list) : 적용되어 있는 정책 목록을 출력                                                           규칙 추가 후에 저장하기                                            service iptables save -&gt; /etc/sysconfig/iptables                                                           현재 iptables 규칙을 초기화 하기                                            iptables -F (flush) : 체인의 모든 규칙을 삭제                       iptables -F INPUT                                                           특정 출발지의 패킷을 모두 차단                                            iptables -A INPUT -s 192.168.0.5 -j DROP                                                           특정 목적지로 가는 패킷이 아니라면 허용                                            iptables -A INPUT -d !192.168.0.10 -j ACCPET                                                           특정 프로토콜, 특정 포트일 경우 허용                                            iptables -A INPUT -p TCP --dport 80 -j ACCEPT                                                           ICMP 의 경우 타입과 코드를 이용한 메시지 식별                                                                                   상태 추적 (Connection Tracking)            상태 유형                    New                            상태추적 테이블에 연결 정보를 가지고 있지 않은 패킷               최초로 들어온 패킷의 상태               예) TCP 의 SYN 패킷                                   ESTABLISHED                            상태추적 테이블에 연결 정보를 가지고 있는 패킷의 상태               연결된 이후에 송수신되는 패킷들의 상태                                   RELATED                            상태추적 테이블에 연관된 연결정보를 가지고 있는 패킷의 상태                                    연관 : 연결 시에 포트의 정보가 서비스 수행중에 새롭게 추가될 수 있는데 이러한 서비스 패킷의 상태를 말함                                            예) FTP 프로토콜 (21/TCP 제어채널 -&gt; 20/TCP 데이터채널)                                                                                                           INVALID                            어떤 상태에도 해당되지 않는 패킷상태               연결된 상태를 알 수 없거나 잘못된 헤더를 가지고 있는 경우                                               프로토콜 상태 유형                    TCP 프로토콜 상태                            방화벽 기준                                    inbound SYN 패킷 : NEW                   outbound SYN + ACK 패킷 : ESTABLISHED                   연결종료 마지막 ACK 패킷이 보이기 전까지 ESTABLISHED 상태                                                                   UDP 프로토콜 상태                            비연결 (Connectionless) 프로토콜 : 연결 상태를 유지하지 않음                                    프로토콜 수준에서 연결상태 정보가 없음                                               최초 inbound : NEW 상태               상태추적 테이블에 UDP 는 inbound 될 때마다 임의의 시간동안 정보를 유지 (ESTABLISHED 상태)                                               룰 설정 예시                    위조된 TCP SYN 패킷을 차단                            상태 추적 테이블 상 NEW 이면서 SYN 플래그로 설정되지 않은 패킷 -&gt; DROP               iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT                                    상태추적 테이블에서 ESTABLISEHD, RELATED 상태의 패킷은 모두 허용                                            이미 허용된 트래픽에 대해서는 룰 검사를 다시 하지 않음 (성능 향상)                                                           -m state : 상태추적기능을 사용하기 위한 옵션 (state 모듈)                   --state : state 옵션                                               iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix &quot;[Forged SYN Packet]&quot;                                    패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 로그에 남김                   --log-prefix &quot;접두어&quot; : 로그에 접두어를 만들어 표시                                               iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP                                    패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 차단                                               설정 예시                       iptables -F INPUT       iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT       iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix &quot;[Forged SYN Packet]&quot;       iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP                                                                   FTP ACTIVE MODE 상태추적 (Passive 모드일 경우 포트 지정을 1024 이상으로 하면 됌)                   iptables -F INPUT        iptables -P INPUT DROP        iptables -P OUTPUT DROP       iptables -A INPUT -m state --state ESTABLISHED -j LOG --log-prefix &quot;[INPUT ESTABLISHED]&quot;       iptables -A INPUT -m state --state RELATED -j LOG --log-prefix &quot;[INPUT RELATED]&quot;       iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT       iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j LOG --log-prefix &quot;[FTP INPUT_NEW]&quot;       iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j ACCEPT       iptables -A OUTPUT -m state --state ESTABLISHED -j LOG --log-prefix &quot;[OUTPUT ESTABLISHED]&quot;       iptables -A OUTPUT -m state --state RELATED -j LOG --log-prefix &quot;[OUTPUT RELATED]&quot;       iptables -A OUTPUT -m state --state ESTABLISHED, RELATED -j ACCEPT                                                   확장 모듈            connlimit 모듈                    개요                            동일한 ip 대역에 대한 동시 연결 개수 제한 모듈               디도스 공격에 효과적 대응                                   주요옵션                            --connlimit-above n : n을 초과하는 동시 연결을 제한               --connlimit-mask mask : 0~32 범위의 mask 값을 지정, IP 대역에 대한 동시 연결 제한                                   예시                            웹서버 80 포트에 대한 TCP SYN Flooding 공격 대응룰                                    TCP 80포트에 동일 src IP 로 동시연결개수가 5개 초과시 이를 차단                   로그 저장 위치 : /var/log/messages                       iptables -F INPUT   iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT   iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j LOG --log-prefix &quot;[CONNLIMIT]&quot;   iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j DROP                                                                                       웹서버 (80/tcp) 에 대한 TCP SYN Flooding 공격에 대응하기 위한 룰 설정                       iptables -F INPUT       iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT       iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 10 --connlimit-mask 24 -j LOG --log-prefix &quot;[CONNLIMIT]&quot;       iptables -A                                                                                              limit 모듈                    룰에 매치되는 비율을 제한">







  <meta property="article:published_time" content="2022-02-07T09:00:00+09:00">





  

  


<link rel="canonical" href="https://bluesplatter.com/is_certification/IS-IncidentAnalysis-iptables/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "HY03",
      "url": "https://bluesplatter.com/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Bluesplatter Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo/logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          세상에 남기는 작은 흔적
          <span class="site-subtitle">Bluesplatter</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/">연도별 포스트</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://bluesplatter.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#is_certification" itemprop="item"><span itemprop="name">Is_certification</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">정보보안 - iptables</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile/photo.jpg" alt="HY03" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">HY03</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>저는 전문가가 아니고 이것 저것 알아보는 비전문가 입니다. <br /> 틀린 내용이 기술되어도 너그러이 봐주시고 댓글을 남겨주셨으면 좋겠습니다.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Republic of Korea</span>
        </li>
      

      
        
          
        
          
            <li><a href="http://bluesplatter.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
        
          
        
          
            <li><a href="https://github.com/HY03" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      
        <li>
          <a href="mailto:hyunik03@gmail.com">
            <meta itemprop="email" content="hyunik03@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">이메일</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="정보보안 - iptables">
    <meta itemprop="description" content="iptables  정의          리눅스 상에서 방화벽을 설정하는 도구      패킷 필터링 기능 : 지나가는 패킷의 헤더를 보고 해당 패킷에 대한 허용/차단 (ACCEPT/DROP) 결정      Rule 기반의 패킷 필터링 기능을 제공        기능          상태추적 (Connection Tracking or Stateful Inspection)                  방화벽을 통과하는 모든 패킷에 대한 연결상태를 추적, 메모리에 기록하여 상태추적테이블을 생성          모든 송 수신 패킷을 기록하고 검사          기존 연결을 가장하여 접근할 경우 저장되어 있는 상태목록과 비교하여 허용/차단          이미 연결된 상태의 패킷은 검사하지 않음          Stateful Inspection : 이스라엘 보안업체인 Checkpoint 사 에서 최초로 개발한 방화벽 구조                    NAT 기능                  네트워크 주소 변환                    패킷 레벨에서 로깅      확장 모듈을 이용해 다양한 기능 제공        용어          Table                  Filter Table          NAT Table          Mangle Table                    Chain : 패킷이 이동하는 경로 (3가지 기본 Chain 이 존재-삭제불가)                  Chain Input : 방화벽을 최종 목적지로 하는 체인          Chain Output : 방화벽을 최초 출발지로 정하는 체인          Chain Forward : 방화벽을 통과하는 체인 (방화벽을 별도의 서버로 구성해서 서비스할 때 사용하는 체인)          -&gt; INPUT -&gt; Linux Server -&gt; Output -&gt;          -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt; FORWARD -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;                          Linux Server 를 목적지로 삼는 모든 패킷은 Input Chain 통과              Linux Server 에서 생성되어 외부로 보내지는 모든 패킷은 Output Chain 을 통과              Forward Chain 은 현재의 Linux Server 가 목적지가 아닌 패킷이 통과하는 Chain (방화벽을 별도의 서버로 구성)                                          Rule : 패킷 필터링을 하기 위한 Rule                  기본구문 형식                          iptables [테이블] [체인] [룰] [타깃]              대 소문자 구분                                테이블 설정                          형식 : -t [테이블]              테이블을 명시하지 않으면 기본값으로 Filter Table 이 적용                                체인(Chain) 설정                          형식 : iptables -[A|I|D] [체인]              -A : append 모드 (해당 체인의 가장 마지막 줄에 룰을 추가)              -I : insert 모드 (해당 체인의 첫 줄에 룰을 추가)                                  행번호 지정시 : -I 체인 n(행번호) (n 행에 롤 추가)                                            -D (delete) : delete 모드                                  -D 체인 룰 : 해당 룰 삭제                  -D 체인 n(행번호) : n행의 룰 삭제                                          iptables -D INPUT 1                                                                                  -P : 해당 체인의 기본 정책을 설정, 변경                                  기본 정책 : 해당 체인의 모든 룰에 매치가 되지 않으면 적용되는 정책                  iptables -P [체인명] [ACCPET|DROP|REJECT|LOG]                                            -R (replace) : 위치 선택 후 정책 교환              -N (new chain) : 새로운 체인을 생성              -Z : 체인의 모든 규칙들의 패킷과 바이트 카운트를 0으로 만듬              -X (delete chain) : 비어있는 체인 제거              -C (check) : 패킷을 테스트                                룰 설정                          형식 : iptables -A INPUT -s [발신지] --sport [발신지포트] -d [목적지] --dport [목적지포트] -j [정책]              제어 옵션 명령어                                  -s (source) : 패킷의 송신지를 제어, IP 또는 IP 대역을 명시 가능                                          -s 192.168.159.0/24                                                        -d (destination) : 패킷의 수신지를 제어, IP 또는 IP 대역을 명시 가능                  -j (jump) : 방화벽을 지난 후 패킷의 상태를 제어                                          -j [정책] : 룰에 매치될 때 적용할 정책을 지정                      ACCEPT : 허용                      DROP : 해당 패킷을 차단한 후 아무런 응답 메시지를 전송하지 않음                      REJECT : 해당 패킷을 차단한 후 ICMP 에러 메시지로 응답 (불필요한 네트워크 트래픽 발생)                      LOG : 탐지 로그를 남김. 주로 /var/log/message 에 남김                                                        -p (protocol) : 프로토콜을 제어                  -i (inbound interface) : 패킷이 들어오는 네트워크 인터페이스                  -o (outbound interface) : 패킷이 나가는 네트워크 인터페이스                  -f (fragment) : 분절(단편화)된 패킷                  --sport : 송신지 포트 제어 (대역 명시 가능)                                          --sport 1024: : 1024 이상의 포트                      --sport :65535 : 65535 이하의 포트                      --sport 1:1023 : 1 ~ 1023 대역의 포트                                                        --dport : 수신지 포트 제어                  --icmp-type [메시지타입] : ICMP 의 경우 타입과 코드를 이용한 메시지 식별                                          --icmp-type echo-request (ICMP Echo Request 를 의미)                                                                                  예시                                  기본 정책을 ACCPET 로 설정                                          iptables -P INPUT ACCEPT                      iptables -P OUTPUT ACCEPT                      iptables -P FORWARD ACCEPT                      -P (policy) : 미리 만들어진 체인의 정책을 바꾸기                                                        현재 자신의 방화벽 규칙을 보는 명령                                          iptables --list                      iptables -L (list) : 적용되어 있는 정책 목록을 출력                                                        규칙 추가 후에 저장하기                                          service iptables save -&gt; /etc/sysconfig/iptables                                                        현재 iptables 규칙을 초기화 하기                                          iptables -F (flush) : 체인의 모든 규칙을 삭제                      iptables -F INPUT                                                        특정 출발지의 패킷을 모두 차단                                          iptables -A INPUT -s 192.168.0.5 -j DROP                                                        특정 목적지로 가는 패킷이 아니라면 허용                                          iptables -A INPUT -d !192.168.0.10 -j ACCPET                                                        특정 프로토콜, 특정 포트일 경우 허용                                          iptables -A INPUT -p TCP --dport 80 -j ACCEPT                                                        ICMP 의 경우 타입과 코드를 이용한 메시지 식별                                                                          상태 추적 (Connection Tracking)          상태 유형                  New                          상태추적 테이블에 연결 정보를 가지고 있지 않은 패킷              최초로 들어온 패킷의 상태              예) TCP 의 SYN 패킷                                ESTABLISHED                          상태추적 테이블에 연결 정보를 가지고 있는 패킷의 상태              연결된 이후에 송수신되는 패킷들의 상태                                RELATED                          상태추적 테이블에 연관된 연결정보를 가지고 있는 패킷의 상태                                  연관 : 연결 시에 포트의 정보가 서비스 수행중에 새롭게 추가될 수 있는데 이러한 서비스 패킷의 상태를 말함                                          예) FTP 프로토콜 (21/TCP 제어채널 -&gt; 20/TCP 데이터채널)                                                                                                    INVALID                          어떤 상태에도 해당되지 않는 패킷상태              연결된 상태를 알 수 없거나 잘못된 헤더를 가지고 있는 경우                                          프로토콜 상태 유형                  TCP 프로토콜 상태                          방화벽 기준                                  inbound SYN 패킷 : NEW                  outbound SYN + ACK 패킷 : ESTABLISHED                  연결종료 마지막 ACK 패킷이 보이기 전까지 ESTABLISHED 상태                                                              UDP 프로토콜 상태                          비연결 (Connectionless) 프로토콜 : 연결 상태를 유지하지 않음                                  프로토콜 수준에서 연결상태 정보가 없음                                            최초 inbound : NEW 상태              상태추적 테이블에 UDP 는 inbound 될 때마다 임의의 시간동안 정보를 유지 (ESTABLISHED 상태)                                          룰 설정 예시                  위조된 TCP SYN 패킷을 차단                          상태 추적 테이블 상 NEW 이면서 SYN 플래그로 설정되지 않은 패킷 -&gt; DROP              iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT                                  상태추적 테이블에서 ESTABLISEHD, RELATED 상태의 패킷은 모두 허용                                          이미 허용된 트래픽에 대해서는 룰 검사를 다시 하지 않음 (성능 향상)                                                        -m state : 상태추적기능을 사용하기 위한 옵션 (state 모듈)                  --state : state 옵션                                            iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix &quot;[Forged SYN Packet]&quot;                                  패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 로그에 남김                  --log-prefix &quot;접두어&quot; : 로그에 접두어를 만들어 표시                                            iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP                                  패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 차단                                            설정 예시                      iptables -F INPUT      iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT      iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix &quot;[Forged SYN Packet]&quot;      iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP                                                              FTP ACTIVE MODE 상태추적 (Passive 모드일 경우 포트 지정을 1024 이상으로 하면 됌)                  iptables -F INPUT       iptables -P INPUT DROP       iptables -P OUTPUT DROP      iptables -A INPUT -m state --state ESTABLISHED -j LOG --log-prefix &quot;[INPUT ESTABLISHED]&quot;      iptables -A INPUT -m state --state RELATED -j LOG --log-prefix &quot;[INPUT RELATED]&quot;      iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT      iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j LOG --log-prefix &quot;[FTP INPUT_NEW]&quot;      iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j ACCEPT      iptables -A OUTPUT -m state --state ESTABLISHED -j LOG --log-prefix &quot;[OUTPUT ESTABLISHED]&quot;      iptables -A OUTPUT -m state --state RELATED -j LOG --log-prefix &quot;[OUTPUT RELATED]&quot;      iptables -A OUTPUT -m state --state ESTABLISHED, RELATED -j ACCEPT                                            확장 모듈          connlimit 모듈                  개요                          동일한 ip 대역에 대한 동시 연결 개수 제한 모듈              디도스 공격에 효과적 대응                                주요옵션                          --connlimit-above n : n을 초과하는 동시 연결을 제한              --connlimit-mask mask : 0~32 범위의 mask 값을 지정, IP 대역에 대한 동시 연결 제한                                예시                          웹서버 80 포트에 대한 TCP SYN Flooding 공격 대응룰                                  TCP 80포트에 동일 src IP 로 동시연결개수가 5개 초과시 이를 차단                  로그 저장 위치 : /var/log/messages                      iptables -F INPUT  iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT  iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j LOG --log-prefix &quot;[CONNLIMIT]&quot;  iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j DROP                                                                                  웹서버 (80/tcp) 에 대한 TCP SYN Flooding 공격에 대응하기 위한 룰 설정                      iptables -F INPUT      iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT      iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 10 --connlimit-mask 24 -j LOG --log-prefix &quot;[CONNLIMIT]&quot;      iptables -A                                                                                      limit 모듈                  룰에 매치되는 비율을 제한                    ">
    <meta itemprop="datePublished" content="2022-02-07T09:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">정보보안 - iptables
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2022-02-07T09:00:00+09:00">February 7, 2022</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu">
  <li><a href="#iptables">iptables</a></li>
</ul>

            </nav>
          </aside>
        
        <h1 id="iptables">iptables</h1>
<ul>
  <li>정의
    <ul>
      <li>리눅스 상에서 방화벽을 설정하는 도구</li>
      <li>패킷 필터링 기능 : 지나가는 패킷의 헤더를 보고 해당 패킷에 대한 허용/차단 (ACCEPT/DROP) 결정</li>
      <li>Rule 기반의 패킷 필터링 기능을 제공</li>
    </ul>
  </li>
  <li>기능
    <ul>
      <li>상태추적 (Connection Tracking or Stateful Inspection)
        <ul>
          <li>방화벽을 통과하는 모든 패킷에 대한 연결상태를 추적, 메모리에 기록하여 상태추적테이블을 생성</li>
          <li>모든 송 수신 패킷을 기록하고 검사</li>
          <li>기존 연결을 가장하여 접근할 경우 저장되어 있는 상태목록과 비교하여 허용/차단</li>
          <li>이미 연결된 상태의 패킷은 검사하지 않음</li>
          <li>Stateful Inspection : 이스라엘 보안업체인 Checkpoint 사 에서 최초로 개발한 방화벽 구조</li>
        </ul>
      </li>
      <li>NAT 기능
        <ul>
          <li>네트워크 주소 변환</li>
        </ul>
      </li>
      <li>패킷 레벨에서 로깅</li>
      <li>확장 모듈을 이용해 다양한 기능 제공</li>
    </ul>
  </li>
  <li>용어
    <ul>
      <li>Table
        <ul>
          <li>Filter Table</li>
          <li>NAT Table</li>
          <li>Mangle Table</li>
        </ul>
      </li>
      <li>Chain : 패킷이 이동하는 경로 (3가지 기본 Chain 이 존재-삭제불가)
        <ul>
          <li>Chain Input : 방화벽을 최종 목적지로 하는 체인</li>
          <li>Chain Output : 방화벽을 최초 출발지로 정하는 체인</li>
          <li>Chain Forward : 방화벽을 통과하는 체인 (방화벽을 별도의 서버로 구성해서 서비스할 때 사용하는 체인)</li>
          <li>-&gt; INPUT -&gt; Linux Server -&gt; Output -&gt;</li>
          <li>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt; FORWARD -&gt;-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;
            <ul>
              <li>Linux Server 를 목적지로 삼는 모든 패킷은 Input Chain 통과</li>
              <li>Linux Server 에서 생성되어 외부로 보내지는 모든 패킷은 Output Chain 을 통과</li>
              <li>Forward Chain 은 현재의 Linux Server 가 목적지가 아닌 패킷이 통과하는 Chain (방화벽을 별도의 서버로 구성)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>Rule</strong> : 패킷 필터링을 하기 위한 Rule
        <ul>
          <li>기본구문 형식
            <ul>
              <li><code class="language-plaintext highlighter-rouge">iptables [테이블] [체인] [룰] [타깃]</code></li>
              <li>대 소문자 구분</li>
            </ul>
          </li>
          <li>테이블 설정
            <ul>
              <li>형식 : <code class="language-plaintext highlighter-rouge">-t [테이블]</code></li>
              <li>테이블을 명시하지 않으면 기본값으로 Filter Table 이 적용</li>
            </ul>
          </li>
          <li>체인(Chain) 설정
            <ul>
              <li>형식 : <code class="language-plaintext highlighter-rouge">iptables -[A|I|D] [체인]</code></li>
              <li><code class="language-plaintext highlighter-rouge">-A</code> : append 모드 (해당 체인의 가장 마지막 줄에 룰을 추가)</li>
              <li><code class="language-plaintext highlighter-rouge">-I</code> : insert 모드 (해당 체인의 첫 줄에 룰을 추가)
                <ul>
                  <li>행번호 지정시 : <code class="language-plaintext highlighter-rouge">-I 체인 n(행번호)</code> (n 행에 롤 추가)</li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">-D</code> (delete) : delete 모드
                <ul>
                  <li><code class="language-plaintext highlighter-rouge">-D 체인 룰</code> : 해당 룰 삭제</li>
                  <li><code class="language-plaintext highlighter-rouge">-D 체인 n(행번호)</code> : n행의 룰 삭제
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables -D INPUT 1</code></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">-P</code> : 해당 체인의 기본 정책을 설정, 변경
                <ul>
                  <li>기본 정책 : 해당 체인의 모든 룰에 매치가 되지 않으면 적용되는 정책</li>
                  <li><code class="language-plaintext highlighter-rouge">iptables -P [체인명] [ACCPET|DROP|REJECT|LOG]</code></li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">-R</code> (replace) : 위치 선택 후 정책 교환</li>
              <li><code class="language-plaintext highlighter-rouge">-N</code> (new chain) : 새로운 체인을 생성</li>
              <li><code class="language-plaintext highlighter-rouge">-Z</code> : 체인의 모든 규칙들의 패킷과 바이트 카운트를 0으로 만듬</li>
              <li><code class="language-plaintext highlighter-rouge">-X</code> (delete chain) : 비어있는 체인 제거</li>
              <li><code class="language-plaintext highlighter-rouge">-C</code> (check) : 패킷을 테스트</li>
            </ul>
          </li>
          <li>룰 설정
            <ul>
              <li>형식 : <code class="language-plaintext highlighter-rouge">iptables -A INPUT -s [발신지] --sport [발신지포트] -d [목적지] --dport [목적지포트] -j [정책]</code></li>
              <li>제어 옵션 명령어
                <ul>
                  <li><code class="language-plaintext highlighter-rouge">-s</code> (source) : 패킷의 송신지를 제어, IP 또는 IP 대역을 명시 가능
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">-s 192.168.159.0/24</code></li>
                    </ul>
                  </li>
                  <li><code class="language-plaintext highlighter-rouge">-d</code> (destination) : 패킷의 수신지를 제어, IP 또는 IP 대역을 명시 가능</li>
                  <li><code class="language-plaintext highlighter-rouge">-j</code> (jump) : 방화벽을 지난 후 패킷의 상태를 제어
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">-j [정책]</code> : 룰에 매치될 때 적용할 정책을 지정</li>
                      <li>ACCEPT : 허용</li>
                      <li>DROP : 해당 패킷을 차단한 후 아무런 응답 메시지를 전송하지 않음</li>
                      <li>REJECT : 해당 패킷을 차단한 후 ICMP 에러 메시지로 응답 (불필요한 네트워크 트래픽 발생)</li>
                      <li>LOG : 탐지 로그를 남김. 주로 <code class="language-plaintext highlighter-rouge">/var/log/message</code> 에 남김</li>
                    </ul>
                  </li>
                  <li><code class="language-plaintext highlighter-rouge">-p</code> (protocol) : 프로토콜을 제어</li>
                  <li><code class="language-plaintext highlighter-rouge">-i</code> (inbound interface) : 패킷이 들어오는 네트워크 인터페이스</li>
                  <li><code class="language-plaintext highlighter-rouge">-o</code> (outbound interface) : 패킷이 나가는 네트워크 인터페이스</li>
                  <li><code class="language-plaintext highlighter-rouge">-f</code> (fragment) : 분절(단편화)된 패킷</li>
                  <li><code class="language-plaintext highlighter-rouge">--sport</code> : 송신지 포트 제어 (대역 명시 가능)
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">--sport 1024:</code> : 1024 이상의 포트</li>
                      <li><code class="language-plaintext highlighter-rouge">--sport :65535</code> : 65535 이하의 포트</li>
                      <li><code class="language-plaintext highlighter-rouge">--sport 1:1023</code> : 1 ~ 1023 대역의 포트</li>
                    </ul>
                  </li>
                  <li><code class="language-plaintext highlighter-rouge">--dport</code> : 수신지 포트 제어</li>
                  <li><code class="language-plaintext highlighter-rouge">--icmp-type [메시지타입]</code> : ICMP 의 경우 타입과 코드를 이용한 메시지 식별
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">--icmp-type echo-request</code> (ICMP Echo Request 를 의미)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>예시
                <ul>
                  <li>기본 정책을 ACCPET 로 설정
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables -P INPUT ACCEPT</code></li>
                      <li><code class="language-plaintext highlighter-rouge">iptables -P OUTPUT ACCEPT</code></li>
                      <li><code class="language-plaintext highlighter-rouge">iptables -P FORWARD ACCEPT</code></li>
                      <li><code class="language-plaintext highlighter-rouge">-P</code> (policy) : 미리 만들어진 체인의 정책을 바꾸기</li>
                    </ul>
                  </li>
                  <li>현재 자신의 방화벽 규칙을 보는 명령
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables --list</code></li>
                      <li><code class="language-plaintext highlighter-rouge">iptables -L</code> (list) : 적용되어 있는 정책 목록을 출력</li>
                    </ul>
                  </li>
                  <li>규칙 추가 후에 저장하기
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">service iptables save -&gt; /etc/sysconfig/iptables</code></li>
                    </ul>
                  </li>
                  <li>현재 iptables 규칙을 초기화 하기
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables -F</code> (flush) : 체인의 모든 규칙을 삭제</li>
                      <li><code class="language-plaintext highlighter-rouge">iptables -F INPUT</code></li>
                    </ul>
                  </li>
                  <li>특정 출발지의 패킷을 모두 차단
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables -A INPUT -s 192.168.0.5 -j DROP</code></li>
                    </ul>
                  </li>
                  <li>특정 목적지로 가는 패킷이 아니라면 허용
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables -A INPUT -d !192.168.0.10 -j ACCPET</code></li>
                    </ul>
                  </li>
                  <li>특정 프로토콜, 특정 포트일 경우 허용
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">iptables -A INPUT -p TCP --dport 80 -j ACCEPT</code></li>
                    </ul>
                  </li>
                  <li>ICMP 의 경우 타입과 코드를 이용한 메시지 식별</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>상태 추적 (Connection Tracking)
    <ul>
      <li>상태 유형
        <ul>
          <li>New
            <ul>
              <li>상태추적 테이블에 연결 정보를 가지고 있지 않은 패킷</li>
              <li>최초로 들어온 패킷의 상태</li>
              <li>예) TCP 의 SYN 패킷</li>
            </ul>
          </li>
          <li>ESTABLISHED
            <ul>
              <li>상태추적 테이블에 연결 정보를 가지고 있는 패킷의 상태</li>
              <li>연결된 이후에 송수신되는 패킷들의 상태</li>
            </ul>
          </li>
          <li>RELATED
            <ul>
              <li>상태추적 테이블에 연관된 연결정보를 가지고 있는 패킷의 상태
                <ul>
                  <li>연관 : 연결 시에 포트의 정보가 서비스 수행중에 새롭게 추가될 수 있는데 이러한 서비스 패킷의 상태를 말함
                    <ul>
                      <li>예) FTP 프로토콜 (21/TCP 제어채널 -&gt; 20/TCP 데이터채널)</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>INVALID
            <ul>
              <li>어떤 상태에도 해당되지 않는 패킷상태</li>
              <li>연결된 상태를 알 수 없거나 잘못된 헤더를 가지고 있는 경우</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>프로토콜 상태 유형
        <ul>
          <li>TCP 프로토콜 상태
            <ul>
              <li>방화벽 기준
                <ul>
                  <li>inbound SYN 패킷 : NEW</li>
                  <li>outbound SYN + ACK 패킷 : ESTABLISHED</li>
                  <li>연결종료 마지막 ACK 패킷이 보이기 전까지 ESTABLISHED 상태</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>UDP 프로토콜 상태
            <ul>
              <li>비연결 (Connectionless) 프로토콜 : 연결 상태를 유지하지 않음
                <ul>
                  <li>프로토콜 수준에서 연결상태 정보가 없음</li>
                </ul>
              </li>
              <li>최초 inbound : NEW 상태</li>
              <li>상태추적 테이블에 UDP 는 inbound 될 때마다 임의의 시간동안 정보를 유지 (ESTABLISHED 상태)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>룰 설정 예시
        <ul>
          <li>위조된 TCP SYN 패킷을 차단
            <ul>
              <li>상태 추적 테이블 상 NEW 이면서 SYN 플래그로 설정되지 않은 패킷 -&gt; DROP</li>
              <li><code class="language-plaintext highlighter-rouge">iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</code>
                <ul>
                  <li>상태추적 테이블에서 ESTABLISEHD, RELATED 상태의 패킷은 모두 허용
                    <ul>
                      <li>이미 허용된 트래픽에 대해서는 룰 검사를 다시 하지 않음 (성능 향상)</li>
                    </ul>
                  </li>
                  <li><code class="language-plaintext highlighter-rouge">-m state</code> : 상태추적기능을 사용하기 위한 옵션 (state 모듈)</li>
                  <li><code class="language-plaintext highlighter-rouge">--state</code> : state 옵션</li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix "[Forged SYN Packet]"</code>
                <ul>
                  <li>패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 로그에 남김</li>
                  <li><code class="language-plaintext highlighter-rouge">--log-prefix "접두어"</code> : 로그에 접두어를 만들어 표시</li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP</code>
                <ul>
                  <li>패킷의 상태가 NEW 이면서, SYN 플래그가 설정되지 않은 비정상 패킷을 차단</li>
                </ul>
              </li>
              <li>설정 예시
                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      iptables -F INPUT
      iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
      iptables -A INPUT -p tcp !--syn -m state --state NEW -j LOG --log-prefix "[Forged SYN Packet]"
      iptables -A INPUT -p tcp !--syn -m state --state NEW -j DROP
</code></pre></div>                </div>
              </li>
            </ul>
          </li>
          <li>FTP ACTIVE MODE 상태추적 (Passive 모드일 경우 포트 지정을 1024 이상으로 하면 됌)
            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      iptables -F INPUT 
      iptables -P INPUT DROP 
      iptables -P OUTPUT DROP
      iptables -A INPUT -m state --state ESTABLISHED -j LOG --log-prefix "[INPUT ESTABLISHED]"
      iptables -A INPUT -m state --state RELATED -j LOG --log-prefix "[INPUT RELATED]"
      iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
      iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j LOG --log-prefix "[FTP INPUT_NEW]"
      iptables -A INPUT -m state --state NEW -p tcp --dport 21 -j ACCEPT
      iptables -A OUTPUT -m state --state ESTABLISHED -j LOG --log-prefix "[OUTPUT ESTABLISHED]"
      iptables -A OUTPUT -m state --state RELATED -j LOG --log-prefix "[OUTPUT RELATED]"
      iptables -A OUTPUT -m state --state ESTABLISHED, RELATED -j ACCEPT
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>확장 모듈
    <ul>
      <li>connlimit 모듈
        <ul>
          <li>개요
            <ul>
              <li>동일한 ip 대역에 대한 동시 연결 개수 제한 모듈</li>
              <li>디도스 공격에 효과적 대응</li>
            </ul>
          </li>
          <li>주요옵션
            <ul>
              <li><code class="language-plaintext highlighter-rouge">--connlimit-above n</code> : n을 초과하는 동시 연결을 제한</li>
              <li><code class="language-plaintext highlighter-rouge">--connlimit-mask mask</code> : 0~32 범위의 mask 값을 지정, IP 대역에 대한 동시 연결 제한</li>
            </ul>
          </li>
          <li>예시
            <ul>
              <li>웹서버 80 포트에 대한 TCP SYN Flooding 공격 대응룰
                <ul>
                  <li>TCP 80포트에 동일 src IP 로 동시연결개수가 5개 초과시 이를 차단</li>
                  <li>로그 저장 위치 : <code class="language-plaintext highlighter-rouge">/var/log/messages</code>
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  iptables -F INPUT
  iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT
  iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j LOG --log-prefix "[CONNLIMIT]"
  iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j DROP
</code></pre></div>                    </div>
                  </li>
                </ul>
              </li>
              <li>웹서버 (80/tcp) 에 대한 TCP SYN Flooding 공격에 대응하기 위한 룰 설정
                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      iptables -F INPUT
      iptables -A INPUT -m state --state ESTABLISHED, RELATED -j ACCEPT
      iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 10 --connlimit-mask 24 -j LOG --log-prefix "[CONNLIMIT]"
      iptables -A
</code></pre></div>                </div>
              </li>
              <li></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>limit 모듈
        <ul>
          <li>룰에 매치되는 비율을 제한</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#iptables" class="page__taxonomy-item" rel="tag">iptables</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#%EC%A0%95%EB%B3%B4%EB%B3%B4%EC%95%88%EA%B8%B0%EC%82%AC" class="page__taxonomy-item" rel="tag">정보보안기사</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#is-certification" class="page__taxonomy-item" rel="tag">IS_Certification</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2022-02-07T09:00:00+09:00">February 7, 2022</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%EC%A0%95%EB%B3%B4%EB%B3%B4%EC%95%88+-+iptables%20https%3A%2F%2Fbluesplatter.com%2Fis_certification%2FIS-IncidentAnalysis-iptables%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbluesplatter.com%2Fis_certification%2FIS-IncidentAnalysis-iptables%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbluesplatter.com%2Fis_certification%2FIS-IncidentAnalysis-iptables%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/is_certification/IS-IncidentAnalysis-snort/" class="pagination--pager" title="정보보안 - snort
">이전</a>
    
    
      <a href="/is_certification/IST-Network-Protocol/" class="pagination--pager" title="정보보안기사 실기 - 01.네트워크 - 01.프로토콜
">다음</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">참고</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/jenkins/Jenkins_Automating_your_dilivery_pipeline/" rel="permalink">Jenkins - Automating your delivery pipeline
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2022-09-29T16:00:00+09:00">September 29, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">후기
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/a%20life%20of%20happiness%20and%20fulfillment%20(%ED%96%89%EB%B3%B5%ED%95%98%EA%B3%A0%20%EB%B3%B4%EB%9E%8C%EC%B0%AC%20%EC%82%B6)/Happiness-08_Summary/" rel="permalink">A Life of Happiness and Fulfillment - 08. 요약
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2022-09-27T18:00:00+09:00">September 27, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">요약
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/a%20life%20of%20happiness%20and%20fulfillment%20(%ED%96%89%EB%B3%B5%ED%95%98%EA%B3%A0%20%EB%B3%B4%EB%9E%8C%EC%B0%AC%20%EC%82%B6)/Happiness-07_Ignoring-The-Source-Within/" rel="permalink">A Life of Happiness and Fulfillment - 07. 내부의 근원을 무시
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2022-09-24T18:00:00+09:00">September 24, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">내부의 근원을 무시하는 것
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/a%20life%20of%20happiness%20and%20fulfillment%20(%ED%96%89%EB%B3%B5%ED%95%98%EA%B3%A0%20%EB%B3%B4%EB%9E%8C%EC%B0%AC%20%EC%82%B6)/Happiness-06_Distrusting-Life/" rel="permalink">A Life of Happiness and Fulfillment - 06. 삶에 대한 불신
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2022-09-19T18:00:00+09:00">September 19, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">삶에 대한 불신
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="검색어를 입력하세요..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<!--
<script>
	(function(d, h, m){
    var js, fjs = d.getElementsByTagName(h)[0];
    if (d.getElementById(m)){return;}
    js = d.createElement(h); js.id = m;
    js.onload = function(){
        window.makerWidgetComInit({
        position: "left",          
        widget: "eqypoqmawbcz3azh-usiy9q7ma4ong1w1-juelcm3zfgcuwjds"                
    })};
    js.src = "https://makerwidget.com/js/embed.js";
    fjs.parentNode.insertBefore(js, fjs)
	}(document, "script", "dhm"))
</script>
-->
<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
          <li><a href="mailto:hyunik03@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
      
        
      
        
          <li><a href="https://github.com/HY03" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 HY03. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "https://bluesplatter.com/is_certification/IS-IncidentAnalysis-iptables/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/is_certification/IS-IncidentAnalysis-iptables"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://bluesplatter.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
